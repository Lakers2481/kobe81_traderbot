# IBS (Internal Bar Strength) Strategy Configuration
# Mean-reversion strategy based on where price closes within the day's range

strategy:
  name: "ibs"
  description: "Internal Bar Strength mean reversion strategy"
  type: "mean_reversion"
  direction: "long_only"

# Entry Conditions
entry:
  ibs_threshold: 0.2       # Enter when IBS < 0.2 (close near low)
  sma_filter_period: 200   # Only trade above 200 SMA

  # IBS Formula: (Close - Low) / (High - Low)
  # IBS < 0.2 means close is in bottom 20% of day's range

# Exit Conditions
exit:
  # Take profit when IBS crosses above threshold
  ibs_exit_threshold: 0.8  # Exit when IBS > 0.8 (close near high)

  # ATR-based stop loss
  atr_period: 14
  atr_multiplier: 2.0      # Stop at 2x ATR below entry

  # Time-based stop
  max_hold_bars: 5         # Exit after 5 bars if not stopped

# Signal Generation
signals:
  # Shift indicators by 1 bar to prevent lookahead
  lookahead_prevention: true
  shift_bars: 1

  # Fill assumptions
  fill_on: "next_open"     # Signals at close(t), fill at open(t+1)

# Position Sizing
position_sizing:
  method: "fixed_dollar"
  amount: 75               # $75 per trade (micro budget)

# Backtest Parameters
backtest:
  start_date: "2015-01-01"
  end_date: "2024-12-31"

# Walk-Forward Optimization
optimization:
  parameters:
    - name: "ibs_threshold"
      min: 0.1
      max: 0.3
      step: 0.05
    - name: "atr_multiplier"
      min: 1.5
      max: 3.0
      step: 0.5
